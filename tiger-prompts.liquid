{% comment %}
  Tiger Prompts v10 â€” Production Ready
  
  NEW in v10:
  - Vibe settings in slide-out drawer (frees vertical space)
  - Orange primary color (80%), Purple for vibe only (20%)
  - Logo hides completely after first message
  - "Run Enhanced Prompt" button in message cards
  - Mobile responsive with proper touch targets
  - ChatGPT-style clean message display
{% endcomment %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

{{ 'tiger-prompts.css' | asset_url | stylesheet_tag }}
{{ 'tiger-prompts.js' | asset_url | script_tag }}

<section id="tiger-prompts" class="tp-app">
  <div class="tp-layout">
    
    <aside id="tp-sidebar" class="tp-sidebar">
      
      <div class="tp-sidebar-head">
        <div class="tp-sidebar-brand">
          <img 
            id="tp-sidebar-logo" 
            class="tp-sidebar-logo"
            src="https://cdn.shopify.com/s/files/1/0705/7326/0982/files/ChatGPT_Image_Nov_5_2025_at_07_29_59_PM.png?v=1762399837"
            alt="Tiger Prompts">
          <span class="tp-sidebar-title">Tiger Prompts</span>
        </div>
        <button 
          id="tp-sidebar-toggle" 
          class="tp-iconbtn" 
          title="Collapse sidebar">
          <i class="fa-solid fa-chevron-left"></i>
        </button>
      </div>
      
      <nav class="tp-nav">
        
        <div class="tp-nav-section">
          <div class="tp-nav-title">
            Vibe Coding
            <span class="tp-tooltip" data-tooltip="Enable specialized coding mode with file tracking, context management, and code-specific enhancements">
              <i class="fa-solid fa-circle-info"></i>
            </span>
          </div>
          
          <div class="tp-toggle-item tp-toggle-vibe" id="tp-vibe-coding-toggle">
            <div class="tp-toggle-content">
              <i class="fa-solid fa-code"></i>
              <span>Vibe Coding Mode</span>
            </div>
            <div class="tp-toggle-switch">
              <div class="tp-toggle-knob"></div>
            </div>
          </div>
        </div>
        
        <div class="tp-nav-section">
          <div class="tp-nav-title">
            Enhancement Engine
            <span class="tp-tooltip" data-tooltip="Choose between AI-powered LLM enhancement (OpenAI) or local TPEM algorithm. Control depth and auto-execution settings">
              <i class="fa-solid fa-circle-info"></i>
            </span>
          </div>
          
          <div class="tp-toggle-item tp-toggle-orange" id="tp-llm-toggle">
            <div class="tp-toggle-content">
              <i class="fa-solid fa-robot"></i>
              <span>LLM Agent Mode</span>
            </div>
            <div class="tp-toggle-switch">
              <div class="tp-toggle-knob"></div>
            </div>
          </div>
          <div class="tp-toggle-hint">Use OpenAI for enhancement (default)</div>
          
          <div class="tp-field-group">
            <label class="tp-field-label">Enhancement Depth</label>
            <select id="tp-enhancement-depth" class="tp-select">
              <option value="light" selected>âœ¨ Light (Quick Polish)</option>
              <option value="deep">ðŸ”¥ Deep (Full Structure)</option>
            </select>
          </div>
          
          <div class="tp-toggle-item tp-toggle-orange" id="tp-auto-run-toggle">
            <div class="tp-toggle-content">
              <i class="fa-solid fa-play"></i>
              <span>Auto-Run Prompts</span>
            </div>
            <div class="tp-toggle-switch">
              <div class="tp-toggle-knob"></div>
            </div>
          </div>
          <div class="tp-toggle-hint">Run enhanced prompt through LLM automatically</div>
          
          <div class="tp-field-group">
            <label class="tp-field-label">LLM Selection</label>
            <select id="tp-llm-select" class="tp-select">
              <option value="gpt-4o-mini">ChatGPT 4o-mini</option>
              <option value="gpt-4o">ChatGPT 4o (Best) ðŸ’Ž</option>
              <option value="claude-sonnet" disabled>Claude Sonnet (Soon)</option>
              <option value="copilot" disabled>Copilot (Soon)</option>
            </select>
          </div>
        </div>
        
        <div class="tp-nav-section">
          <div class="tp-nav-title">
            Display
            <span class="tp-tooltip" data-tooltip="Toggle visibility of detailed explanations and Prompt Quality Score (PQS) metrics in results">
              <i class="fa-solid fa-circle-info"></i>
            </span>
          </div>
          <button id="tp-explain-toggle" class="tp-btn tp-btn--ghost">
            <i class="fa-solid fa-graduation-cap"></i>
            <span>Show Explanations</span>
          </button>
          <button id="tp-pqs-toggle" class="tp-btn tp-btn--ghost">
            <i class="fa-solid fa-chart-line"></i>
            <span>Show PQS Score</span>
          </button>
        </div>
        
        <div class="tp-nav-section">
          <div class="tp-nav-title">
            Settings
            <span class="tp-tooltip" data-tooltip="Switch between light and dark themes, or clear your conversation history">
              <i class="fa-solid fa-circle-info"></i>
            </span>
          </div>
          <button id="tp-theme-toggle" class="tp-btn tp-btn--ghost">
            <i class="fa-solid fa-moon"></i>
            <span>Toggle Theme</span>
          </button>
          <button id="tp-reset" class="tp-btn tp-btn--ghost">
            <i class="fa-solid fa-rotate-left"></i>
            <span>Clear History</span>
          </button>
        </div>
        
        <div class="tp-nav-section tp-nav-section--saved">
          <div class="tp-nav-title">
            Saved Prompts
            <span class="tp-tooltip" data-tooltip="Access your bookmarked enhanced prompts. Click any saved prompt to load it back into the input">
              <i class="fa-solid fa-circle-info"></i>
            </span>
          </div>
          <div id="tp-saved-list" class="tp-saved-list">
            <div class="tp-saved-empty">No saved prompts yet</div>
          </div>
        </div>
        
      </nav>
      
      <button id="tp-collapse-tab" class="tp-collapse-tab" title="Expand sidebar">
        <i class="fa-solid fa-chevron-right"></i>
      </button>
      
    </aside>
    
    <main class="tp-main">
      <div class="tp-container">
        
        <!-- LOGO - Hides after first message -->
        <div id="tp-logo-wrap" class="tp-logo-wrap">
          <img 
            id="tp-logo" 
            class="tp-logo tp-logo-light"
            src="https://cdn.shopify.com/s/files/1/0705/7326/0982/files/ChatGPT_Image_Nov_5_2025_at_07_36_00_PM.png?v=1762400176"
            alt="Tiger Prompts">
          <img 
            id="tp-logo-dark" 
            class="tp-logo tp-logo-dark"
            src="https://cdn.shopify.com/s/files/1/0705/7326/0982/files/white-version-tiger-logo-half-half.png?v=1762551640"
            alt="Tiger Prompts"
            style="display: none;">
        </div>
        
        <!-- RESULTS THREAD - Main focus -->
        <div id="tp-thread" class="tp-thread"></div>
        
        <!-- INPUT FIELD -->
        <div class="tp-input-container">
          <div class="tp-input-wrap">
            <textarea 
              id="tp-input" 
              class="tp-input" 
              placeholder="Message Tiger Prompts..."
              rows="1"></textarea>
            
            <div class="tp-input-actions">
              <button id="tp-vibe-drawer-toggle" class="tp-vibe-cog" title="Vibe Coding Settings" style="display: none;">
                <i class="fa-solid fa-sliders"></i>
              </button>
              
              <button id="tp-voice" class="tp-voice" title="Voice Input (Coming Soon)">
                <i class="fa-solid fa-microphone"></i>
              </button>
              
              <button id="tp-send" class="tp-send" title="Send">
                <i class="fa-solid fa-arrow-up"></i>
              </button>
            </div>
          </div>
        </div>
        
        <!-- FOOTER -->
        <footer class="tp-footer">
          <div class="tp-footer-content">
            <div id="tp-status-indicator" class="tp-status-indicator ready">
              âœ… Ready
            </div>
          </div>
        </footer>
        
      </div>
    </main>
    
  </div>
</section>

<!-- VIBE CODING DRAWER -->
<div id="tp-vibe-drawer" class="tp-vibe-drawer">
  <div class="tp-drawer-overlay"></div>
  <div class="tp-drawer-content">
    <div class="tp-drawer-header">
      <h3>
        <i class="fa-solid fa-code"></i>
        Vibe Coding Context
      </h3>
      <button id="tp-drawer-close" class="tp-drawer-close">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    
    <div class="tp-drawer-body">
      <div class="tp-context-field">
        <label>File Names (comma-separated):</label>
        <input 
          type="text" 
          id="tp-file-defs" 
          class="tp-context-input"
          placeholder="tiger-prompts.js, tiger-prompts.css, tiger-prompts.liquid" />
      </div>
      
      <div class="tp-context-row">
        <label class="tp-context-checkbox">
          <input type="checkbox" id="tp-ctx-existing" />
          <span>I'm modifying existing code</span>
        </label>
      </div>
      
      <textarea 
        id="tp-ctx-code" 
        class="tp-context-textarea"
        placeholder="Paste your existing code here..."
        style="display: none;"
        rows="6"></textarea>
      
      <div class="tp-context-languages">
        <label class="tp-context-label">Languages:</label>
        <div class="tp-language-grid">
          <label class="tp-language-checkbox"><input type="checkbox" value="javascript" /> JavaScript</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="typescript" /> TypeScript</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="react" /> React</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="vue" /> Vue</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="python" /> Python</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="java" /> Java</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="csharp" /> C#</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="php" /> PHP</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="ruby" /> Ruby</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="go" /> Go</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="html" /> HTML</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="css" /> CSS</label>
          <label class="tp-language-checkbox"><input type="checkbox" value="liquid" /> Liquid</label>
        </div>
      </div>
      
      <div class="tp-context-row">
        <label class="tp-context-checkbox">
          <input type="checkbox" id="tp-ctx-tests" />
          <span>Include test cases</span>
        </label>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Tiger Prompts v10",
  "settings": [
    {
      "type": "header",
      "content": "Tiger Prompts v10 Settings"
    },
    {
      "type": "paragraph",
      "content": "Production-ready with vibe drawer, orange theme, and run button"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Tiger Prompts",
      "info": "Internal reference for section"
    },
    {
      "type": "checkbox",
      "id": "show_sidebar",
      "label": "Show Sidebar",
      "default": true,
      "info": "Display the sidebar with navigation controls"
    },
    {
      "type": "checkbox",
      "id": "dark_mode",
      "label": "Enable Dark Mode by Default",
      "default": true,
      "info": "Start with dark theme enabled"
    },
    {
      "type": "checkbox",
      "id": "show_pqs",
      "label": "Show PQS Scores by Default",
      "default": true,
      "info": "Display Prompt Quality Scores"
    },
    {
      "type": "header",
      "content": "Branding"
    },
    {
      "type": "image_picker",
      "id": "main_logo",
      "label": "Main Logo"
    },
    {
      "type": "image_picker",
      "id": "sidebar_logo",
      "label": "Sidebar Logo"
    }
  ],
  "presets": [
    {
      "name": "Tiger Prompts v10",
      "category": "Custom"
    }
  ]
}
{% endschema %}
